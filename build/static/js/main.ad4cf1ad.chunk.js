(this.webpackJsonpmumble=this.webpackJsonpmumble||[]).push([[0],{35:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},47:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var s=a(3),n=a.n(s),c=a(27),o=a.n(c),i=(a(35),a(8)),r=(a(36),a(2));var l=function(){return Object(r.jsxs)("div",{id:"navbar",className:"navbar",children:[Object(r.jsxs)("div",{className:"hamburger",children:[Object(r.jsx)("div",{className:"line-1"}),Object(r.jsx)("div",{className:"line-2"}),Object(r.jsx)("div",{className:"line-3"})]}),Object(r.jsx)("h1",{className:"logo",children:Object(r.jsx)("a",{href:"/",children:"MUMBLE"})}),Object(r.jsx)("div",{id:"modeToggle",className:"modeToggle",children:Object(r.jsx)("i",{className:"far fa-moon"})})]})},d=(a(38),a(5)),u=a(19),j=a.n(u),m=(a(40),function(e){var t,a,n=e.message,c=e.user,o=(c.photoURL||"https://avatars.dicebear.com/api/gridy/".concat(c.email,".svg"))===n.image,i=Object(s.useRef)(null);return Object(s.useEffect)((function(){i.current.scrollIntoView({behavior:"smooth"})}),[]),Object(r.jsxs)("div",{ref:i,className:"message ".concat(o?"messageUser":""),children:[Object(r.jsxs)("div",{className:o?"userCard":"otherCard",children:[Object(r.jsx)("img",{className:"avatar",src:n.image,alt:n.user,title:n.user}),Object(r.jsx)("div",{className:"messageText",children:n.message})]}),Object(r.jsxs)("div",{className:"messageHeader",children:[" ",(a=new Date(null===(t=n.timestamp)||void 0===t?void 0:t.toDate()),j()(a).isSameOrAfter(j()().subtract(1,"days"))?j()(a).fromNow():j()(a).calendar())]})]})}),b=(a(41),a(15)),f=(a(59),a(42),a(44),b.a.initializeApp({apiKey:"AIzaSyCykLI8fjtlMnz4ENaNkbpJMiW6jHL5MY8",authDomain:"final-8ffe0.firebaseapp.com",databaseURL:"https://final-8ffe0-default-rtdb.firebaseio.com",projectId:"final-8ffe0",storageBucket:"final-8ffe0.appspot.com",messagingSenderId:"321294050630",appId:"1:321294050630:web:dd4c5914296a439649f147",measurementId:"G-N4RCXJC7E3"}).firestore()),h=b.a.auth(),p=new b.a.auth.GoogleAuthProvider,g=a(17);a(47);var O=function(e){var t,a=e.id,n=e.name,c=e.addNewRoom,o=Object(s.useState)(""),l=Object(i.a)(o,2),d=l[0],u=l[1];return Object(s.useEffect)((function(){a&&f.collection("rooms").doc(a).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return u(e.docs.map((function(e){return e.data()})))}))}),[a]),c?Object(r.jsx)("div",{className:"room",onClick:function(){var e=prompt("Enter a name for the room");e&&f.collection("rooms").add({name:e})},children:Object(r.jsxs)("h4",{children:["Add New Room  ",Object(r.jsx)("i",{className:"fas fa-plus-circle"})," "]})}):Object(r.jsx)(g.b,{to:"/chat/".concat(a),children:Object(r.jsxs)("div",{className:"room",children:[Object(r.jsx)("img",{className:"avatar",src:"https://avatars.dicebear.com/api/gridy/".concat(a,".svg"),alt:n}),Object(r.jsxs)("div",{className:"roomInfo",children:[Object(r.jsx)("h2",{children:n}),Object(r.jsxs)("p",{children:[d[0]?"".concat(d[0].user.split(" ")[0],": "):"",null===(t=d[0])||void 0===t?void 0:t.message]})]})]})})},v=a(30),x=a.n(v),y=Object(s.createContext)(),N=function(e){var t=e.reducer,a=e.initialState,n=e.children;return Object(r.jsx)(y.Provider,{value:Object(s.useReducer)(t,a),children:n})},w=function(){return Object(s.useContext)(y)};var S=function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),a=t[0],n=t[1],c=w(),o=Object(i.a)(c,2);return o[0].user,o[1],Object(s.useEffect)((function(){f.collection("rooms").orderBy("name","asc").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(r.jsxs)("div",{id:"rooms",className:x()("rooms","close"),children:[Object(r.jsx)("div",{className:"menu",children:Object(r.jsx)("a",{href:"https://mummblly.herokuapp.com/",children:" \u2764(\u0336\u25c9\u035b\u203f\u25c9\u0336)\u2764Random Chat"})}),Object(r.jsx)(O,{addNewRoom:!0}),a.map((function(e){return Object(r.jsx)(O,{id:e.id,name:e.data.name},e.id)})),Object(r.jsx)("div",{className:"placeholder"})]})};a(55);var k=function(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)([{}]),o=Object(i.a)(c,2),l=o[0],u=o[1],j=Object(d.g)().id,h=Object(s.useState)(""),p=Object(i.a)(h,2),g=p[0],O=p[1],v=w(),x=Object(i.a)(v,2),y=x[0].user;return x[1],Object(s.useEffect)((function(){j&&(f.collection("rooms").doc(j).onSnapshot((function(e){return O(e.data().name)})),f.collection("rooms").doc(j).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return u(e.docs.map((function(e){return e.data()})))})))}),[j]),Object(r.jsxs)("div",{className:"content",children:[Object(r.jsx)(S,{}),j?Object(r.jsxs)("div",{className:"chat",children:[Object(r.jsxs)("h2",{className:"welcome",children:["Hi ! Welcome ",Object(r.jsx)("img",{className:"avatar",src:y.photoURL||"https://avatars.dicebear.com/api/gridy/".concat(y.email,".svg"),alt:y.displayName})," ",y.displayName," to ",g]}),Object(r.jsx)("div",{className:"messages",children:l.map((function(e,t){return Object(r.jsx)(m,{user:y,message:e},t)}))}),Object(r.jsx)("form",{className:"form",children:Object(r.jsxs)("div",{className:"formcontrol",children:[Object(r.jsx)("input",{className:"formmessage",value:a,onChange:function(e){return n(e.target.value)},placeholder:"Type a message..."}),a?Object(r.jsx)("button",{className:"formbutton",type:"submit",variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),y.displayName?f.collection("rooms").doc(j).collection("messages").add({message:a,user:y.displayName,image:y.photoURL,timestamp:b.a.firestore.FieldValue.serverTimestamp()}):f.collection("rooms").doc(j).collection("messages").add({message:a,user:y.email,image:"https://avatars.dicebear.com/api/gridy/".concat(y.email,".svg"),timestamp:b.a.firestore.FieldValue.serverTimestamp()}),n("")},children:Object(r.jsx)("i",{className:"fas fa-paper-plane"})}):""]})})]}):""]})},L=(a(56),a(25)),E="SET_USER",C=function(e,t){switch(t.type){case E:return Object(L.a)(Object(L.a)({},e),{},{user:t.user});default:return e}},I=a.p+"static/media/favicon.ccb4de0b.png";var R=function(){var e=w(),t=Object(i.a)(e,2),a=(t[0],t[1]),n=Object(s.useState)(""),c=Object(i.a)(n,2),o=c[0],l=c[1],d=Object(s.useState)(""),u=Object(i.a)(d,2),j=u[0],m=u[1];return Object(r.jsx)("div",{className:"login",children:Object(r.jsxs)("div",{className:"loginContainer",children:[Object(r.jsx)("img",{src:I,width:"150",alt:"logo"}),Object(r.jsx)("h1",{children:"Sign in to Message Me"}),Object(r.jsxs)("form",{children:[Object(r.jsx)("h5",{children:"E-mail"}),Object(r.jsx)("input",{type:"text",value:o,onChange:function(e){return l(e.target.value)}}),Object(r.jsx)("h5",{children:"Password"}),Object(r.jsx)("input",{type:"password",value:j,onChange:function(e){return m(e.target.value)}}),Object(r.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),h.signInWithEmailAndPassword(o,j).then((function(e){a({type:E,user:e.user}),console.log(e)})).catch((function(e){return alert(e.message)}))},className:"loginSignInButton",children:"Sign In"})]}),Object(r.jsx)("button",{className:"register loginRegisterButton",onClick:function(e){e.preventDefault(),h.createUserWithEmailAndPassword(o,j).then((function(e){a({type:E,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"Sign Up"}),Object(r.jsx)("h5",{children:"\u2764 OR \u2764"}),Object(r.jsxs)("button",{onClick:function(){h.signInWithPopup(p).then((function(e){a({type:E,user:e.user})})).catch((function(e){}))},children:[Object(r.jsx)("i",{className:"fab fa-google"})," Sign In with Google"]}),Object(r.jsx)("p",{children:"Disclaimer: This is an unmonitored messaging app and is created for demostration purposes only. So if you want to use this please use it carefully .Don't spam anything bad here. \u2764Happy Mumbly\u2764"})]})})};a(57);var A=function(){return Object(r.jsx)("footer",{id:"footer",className:"footer",children:Object(r.jsxs)("p",{children:["Made with \u2764 by :-",Object(r.jsx)("a",{href:"https://github.com/naditya98",target:"_blank",rel:"noopener noreferrer",children:" Aditya \u2764 Ankita \u2764 Anubhav "}),Object(r.jsx)("br",{})]})})};var U=function(){var e=w(),t=Object(i.a)(e,2),a=t[0].user,n=t[1];return Object(s.useEffect)((function(){h.onAuthStateChanged((function(e){n(e?{type:"SET_USER",user:e}:{type:"SET_USER",user:null})}))}),[]),Object(s.useEffect)((function(){var e=document.querySelector("#modeToggle i"),t=document.querySelector(".hamburger"),a=document.querySelector("#rooms"),s=localStorage.getItem("theme");"light"===s&&(e.classList.add("fa-sun"),e.style.padding="4px 3.8px",e.classList.remove("fa-moon"),document.querySelector("body").classList.add(s)),t.addEventListener("click",(function(){a.classList.contains("open")?(a.classList.remove("open"),a.classList.add("close")):(a.classList.remove("close"),a.classList.add("open"))})),e.addEventListener("click",(function(){e.classList.contains("fa-moon")?(e.classList.add("fa-sun"),e.style.padding="4px 3.8px",e.classList.remove("fa-moon"),localStorage.setItem("theme","light")):(e.classList.add("fa-moon"),e.classList.remove("fa-sun"),e.style.padding="4px 5px",localStorage.clear()),document.querySelector("body").classList.toggle("light")}))}),[a]),Object(r.jsx)("div",{className:"App",children:a?Object(r.jsx)("div",{className:"appBody",children:Object(r.jsx)(g.a,{children:Object(r.jsxs)(d.d,{children:[Object(r.jsxs)(d.b,{exact:!0,path:"/",children:[Object(r.jsx)(l,{}),Object(r.jsx)(k,{}),Object(r.jsx)(A,{})]}),Object(r.jsxs)(d.b,{exact:!0,path:"/chat/:id",children:[Object(r.jsx)(l,{}),Object(r.jsx)(k,{}),Object(r.jsx)(A,{})]}),Object(r.jsx)(d.b,{children:Object(r.jsx)(d.a,{to:"/"})})]})})}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(l,{}),Object(r.jsx)(R,{})]})})},T=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(N,{initialState:{user:null},reducer:C,children:Object(r.jsx)(U,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");T?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var s=a.headers.get("content-type");404===a.status||null!=s&&-1===s.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):W(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):W(t,e)}))}}({onUpdate:function(e){var t=e.waiting;t&&(t.addEventListener("statechange",(function(e){"activated"===e.target.state&&(alert("New Verison Found. Refressing..."),window.location.reload())})),t.postMessage({type:"SKIP_WAITING"}))}})}},[[58,1,2]]]);
//# sourceMappingURL=main.ad4cf1ad.chunk.js.map